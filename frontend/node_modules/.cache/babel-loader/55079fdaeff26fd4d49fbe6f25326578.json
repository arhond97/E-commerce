{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Arhond\\\\IdeaProjects\\\\Serwis_E-commerce_Projekt\\\\frontend\\\\src\\\\components\\\\Orders.js\",\n    _s = $RefreshSig$();\n\nimport { Button, Col, Container, Form, Table } from \"react-bootstrap\";\nimport LoadingBox from \"./Loading\";\nimport ErrorBox from \"./Error\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport React, { useEffect, useState } from \"react\";\nimport { listOrders, orderDelete } from \"../actions/orderActions\";\nimport { ORDER_DELETE_RESET } from \"../constants/orderConstants\";\nimport Moment from \"moment\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function OrdersTab(props) {\n  _s();\n\n  const orderList = useSelector(state => state.orderList);\n  const {\n    loading,\n    error,\n    orders\n  } = orderList;\n  const dispatch = useDispatch();\n  const deleteOrder = useSelector(state => state.deleteOrder);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete\n  } = deleteOrder;\n  const [name, setName] = useState('');\n  useEffect(() => {\n    dispatch({\n      type: ORDER_DELETE_RESET\n    });\n    dispatch(listOrders());\n  }, [dispatch, successDelete]);\n\n  const Mailto = ({\n    email,\n    subject = '',\n    body = '',\n    children\n  }) => {\n    let params = subject || body ? '?' : '';\n    if (subject) params += `subject=${encodeURIComponent(subject)}`;\n    if (body) params += `${subject ? '&' : ''}body=${encodeURIComponent(body)}`;\n    return /*#__PURE__*/_jsxDEV(Link, {\n      to: `mailto:${email}${params}`,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 16\n    }, this);\n  };\n\n  const deleteHandler = order => {\n    if (window.confirm(`Jesteś pawny/a, że chcesz usunąć zamówienie numer ${order._id}?`)) {\n      dispatch(orderDelete(order._id));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      paddingBottom: '14%',\n      marginBottom: '8%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        margin: '10px'\n      },\n      children: \"Zam\\xF3wienia\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      children: /*#__PURE__*/_jsxDEV(Form.Row, {\n        style: {\n          margin: '10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Col,\n          lg: \"4\",\n          controlId: \"formGridSearch\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            className: \"mt-3\",\n            children: \"Wyszukaj\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            className: \"text-lg\",\n            onChange: e => setName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), loadingDelete && /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 31\n    }, this), errorDelete && /*#__PURE__*/_jsxDEV(ErrorBox, {\n      variant: \"danger\",\n      children: errorDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 29\n    }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 25\n    }, this) : error ? /*#__PURE__*/_jsxDEV(ErrorBox, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 51\n    }, this) : /*#__PURE__*/_jsxDEV(Table, {\n      className: \"mb-5\",\n      striped: true,\n      bordered: true,\n      responsive: true,\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"NUMER\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"EMAIL\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"DATA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"KWOTA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ZAP\\u0141ACONE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"DOSTARCZONE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"AKCJE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: orders.filter(order => {\n          if (name === \"\") {\n            return order;\n          } else if (order._id.toLowerCase().includes(name.toLowerCase())) {\n            return order;\n          } else if (order.shippingAddress.email.toLowerCase().includes(name.toLowerCase())) {\n            return order;\n          } else if (order.createdAt.toLowerCase().includes(name.toLowerCase())) {\n            return order;\n          }\n        }).map(order => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: order._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Mailto, {\n              email: order.user.email,\n              subject: `Zamówienie nr ${order._id}`,\n              body: \"Dzie\\u0144 Dobry...Pozdrawiamy\",\n              children: order.user.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: Moment(order.createdAt).format('YYYY/MM/DD HH:MM')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [order.shippingAddress.totalPrice.toFixed(2), \" z\\u0142\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: order.isPaid ? order.paidAt.substring(0, 10) : order.shippingAddress.paymentMethod === 'Gotówka przy odbiorze' ? 'Przy odbiorze' : 'Nieopłacone'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: order.isDelivered ? order.deliveredAt.substring(0, 10) : order.shippingAddress.deliveryMethod === 'Odbiór Osobisty' ? 'Odbiór Osobisty' : 'Niedostarczone'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              onClick: () => {\n                window.location.href = `/order/${order._id}`;\n              },\n              children: \"Szczeg\\xF3\\u0142y\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 37\n            }, this), !order.isPaid ? /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              variant: \"danger\",\n              className: \"ml-3\",\n              onClick: () => deleteHandler(order),\n              children: \"Anuluj Zam\\xF3wienie\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 41\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              variant: \"danger\",\n              className: \"ml-3\",\n              onClick: () => deleteHandler(order),\n              children: \"Zwrot Klienta\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 33\n          }, this)]\n        }, order._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n}\n\n_s(OrdersTab, \"NacDGPBcL+GyNvCWQxFB6R0vqF8=\", false, function () {\n  return [useSelector, useDispatch, useSelector];\n});\n\n_c = OrdersTab;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrdersTab\");","map":{"version":3,"sources":["C:/Users/Arhond/IdeaProjects/Serwis_E-commerce_Projekt/frontend/src/components/Orders.js"],"names":["Button","Col","Container","Form","Table","LoadingBox","ErrorBox","useDispatch","useSelector","React","useEffect","useState","listOrders","orderDelete","ORDER_DELETE_RESET","Moment","Link","OrdersTab","props","orderList","state","loading","error","orders","dispatch","deleteOrder","loadingDelete","errorDelete","success","successDelete","name","setName","type","Mailto","email","subject","body","children","params","encodeURIComponent","deleteHandler","order","window","confirm","_id","paddingBottom","marginBottom","margin","e","target","value","filter","toLowerCase","includes","shippingAddress","createdAt","map","user","format","totalPrice","toFixed","isPaid","paidAt","substring","paymentMethod","isDelivered","deliveredAt","deliveryMethod","location","href"],"mappings":";;;AAAA,SAAQA,MAAR,EAAgBC,GAAhB,EAAqBC,SAArB,EAAgCC,IAAhC,EAAsCC,KAAtC,QAAkD,iBAAlD;AACA,OAAOC,UAAP,MAAuB,WAAvB;AACA,OAAOC,QAAP,MAAqB,SAArB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,OAAOC,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAAQC,UAAR,EAAoBC,WAApB,QAAsC,yBAAtC;AACA,SAAQC,kBAAR,QAAiC,6BAAjC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;;AAEA,eAAe,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAA;;AAErC,QAAMC,SAAS,GAAGX,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACD,SAAhB,CAA7B;AACA,QAAM;AAACE,IAAAA,OAAD;AAAUC,IAAAA,KAAV;AAAiBC,IAAAA;AAAjB,MAA2BJ,SAAjC;AACA,QAAMK,QAAQ,GAAGjB,WAAW,EAA5B;AACA,QAAMkB,WAAW,GAAGjB,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACK,WAAhB,CAA/B;AACA,QAAM;AAACJ,IAAAA,OAAO,EAAEK,aAAV;AAAyBJ,IAAAA,KAAK,EAAEK,WAAhC;AAA6CC,IAAAA,OAAO,EAAEC;AAAtD,MAAuEJ,WAA7E;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBpB,QAAQ,CAAC,EAAD,CAAhC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZc,IAAAA,QAAQ,CAAC;AAACQ,MAAAA,IAAI,EAAElB;AAAP,KAAD,CAAR;AACAU,IAAAA,QAAQ,CAACZ,UAAU,EAAX,CAAR;AACH,GAHQ,EAGN,CAACY,QAAD,EAAWK,aAAX,CAHM,CAAT;;AAKA,QAAMI,MAAM,GAAG,CAAC;AAAEC,IAAAA,KAAF;AAASC,IAAAA,OAAO,GAAG,EAAnB;AAAuBC,IAAAA,IAAI,GAAG,EAA9B;AAAkCC,IAAAA;AAAlC,GAAD,KAAkD;AAC7D,QAAIC,MAAM,GAAGH,OAAO,IAAIC,IAAX,GAAkB,GAAlB,GAAwB,EAArC;AACA,QAAID,OAAJ,EAAaG,MAAM,IAAK,WAAUC,kBAAkB,CAACJ,OAAD,CAAU,EAAjD;AACb,QAAIC,IAAJ,EAAUE,MAAM,IAAK,GAAEH,OAAO,GAAG,GAAH,GAAS,EAAG,QAAOI,kBAAkB,CAACH,IAAD,CAAO,EAAhE;AAEV,wBAAO,QAAC,IAAD;AAAM,MAAA,EAAE,EAAG,UAASF,KAAM,GAAEI,MAAO,EAAnC;AAAA,gBAAuCD;AAAvC;AAAA;AAAA;AAAA;AAAA,YAAP;AACH,GAND;;AAQA,QAAMG,aAAa,GAAIC,KAAD,IAAW;AAC7B,QAAGC,MAAM,CAACC,OAAP,CAAgB,qDAAoDF,KAAK,CAACG,GAAI,GAA9E,CAAH,EAAqF;AACjFpB,MAAAA,QAAQ,CAACX,WAAW,CAAC4B,KAAK,CAACG,GAAP,CAAZ,CAAR;AACH;AACJ,GAJD;;AAMA,sBACI;AAAK,IAAA,KAAK,EAAE;AAACC,MAAAA,aAAa,EAAE,KAAhB;AAAuBC,MAAAA,YAAY,EAAE;AAArC,KAAZ;AAAA,4BACI;AAAI,MAAA,KAAK,EAAE;AAACC,QAAAA,MAAM,EAAE;AAAT,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,IAAD;AAAA,6BACI,QAAC,IAAD,CAAM,GAAN;AAAU,QAAA,KAAK,EAAE;AAACA,UAAAA,MAAM,EAAE;AAAT,SAAjB;AAAA,+BACI,QAAC,IAAD,CAAM,KAAN;AAAY,UAAA,EAAE,EAAE9C,GAAhB;AAAqB,UAAA,EAAE,EAAC,GAAxB;AAA4B,UAAA,SAAS,EAAC,gBAAtC;AAAA,kCACI,QAAC,IAAD,CAAM,KAAN;AAAY,YAAA,SAAS,EAAC,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,IAAD,CAAM,OAAN;AAAc,YAAA,SAAS,EAAC,SAAxB;AAAkC,YAAA,QAAQ,EAAE+C,CAAC,IAAIjB,OAAO,CAACiB,CAAC,CAACC,MAAF,CAASC,KAAV;AAAxD;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAFJ,EAWKxB,aAAa,iBAAI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YAXtB,EAYKC,WAAW,iBAAI,QAAC,QAAD;AAAU,MAAA,OAAO,EAAC,QAAlB;AAAA,gBAA4BA;AAA5B;AAAA;AAAA;AAAA;AAAA,YAZpB,EAaKN,OAAO,gBAAI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YAAJ,GAAqBC,KAAK,gBAAI,QAAC,QAAD;AAAU,MAAA,OAAO,EAAC,QAAlB;AAAA,gBAA4BA;AAA5B;AAAA;AAAA;AAAA;AAAA,YAAJ,gBAC1B,QAAC,KAAD;AAAO,MAAA,SAAS,EAAC,MAAjB;AAAwB,MAAA,OAAO,MAA/B;AAAgC,MAAA,QAAQ,MAAxC;AAAyC,MAAA,UAAU,MAAnD;AAAA,8BACI;AAAA,+BACA;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cADJ,eAYI;AAAA,kBACCC,MAAM,CAAC4B,MAAP,CAAeV,KAAD,IAAW;AACtB,cAAGX,IAAI,KAAK,EAAZ,EAAe;AACX,mBAAOW,KAAP;AACH,WAFD,MAEO,IAAGA,KAAK,CAACG,GAAN,CAAUQ,WAAV,GAAwBC,QAAxB,CAAiCvB,IAAI,CAACsB,WAAL,EAAjC,CAAH,EAAwD;AAC3D,mBAAOX,KAAP;AACH,WAFM,MAED,IAAGA,KAAK,CAACa,eAAN,CAAsBpB,KAAtB,CAA4BkB,WAA5B,GAA0CC,QAA1C,CAAmDvB,IAAI,CAACsB,WAAL,EAAnD,CAAH,EAA0E;AAC5E,mBAAOX,KAAP;AACH,WAFK,MAEC,IAAGA,KAAK,CAACc,SAAN,CAAgBH,WAAhB,GAA8BC,QAA9B,CAAuCvB,IAAI,CAACsB,WAAL,EAAvC,CAAH,EAA8D;AACjE,mBAAOX,KAAP;AACH;AAEJ,SAXA,EAWEe,GAXF,CAWMf,KAAK,iBACR;AAAA,kCACI;AAAA,sBAAKA,KAAK,CAACG;AAAX;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA,mCAAI,QAAC,MAAD;AAAQ,cAAA,KAAK,EAAEH,KAAK,CAACgB,IAAN,CAAWvB,KAA1B;AAAiC,cAAA,OAAO,EAAG,iBAAgBO,KAAK,CAACG,GAAI,EAArE;AAAwE,cAAA,IAAI,EAAC,gCAA7E;AAAA,wBAA0GH,KAAK,CAACgB,IAAN,CAAWvB;AAArH;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA,sBAAKnB,MAAM,CAAC0B,KAAK,CAACc,SAAP,CAAN,CAAwBG,MAAxB,CAA+B,kBAA/B;AAAL;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAA,uBAAKjB,KAAK,CAACa,eAAN,CAAsBK,UAAtB,CAAiCC,OAAjC,CAAyC,CAAzC,CAAL;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAKI;AAAA,sBAAKnB,KAAK,CAACoB,MAAN,GAAepB,KAAK,CAACqB,MAAN,CAAaC,SAAb,CAAuB,CAAvB,EAA0B,EAA1B,CAAf,GAAgDtB,KAAK,CAACa,eAAN,CAAsBU,aAAtB,KAAwC,uBAAxC,GAAkE,eAAlE,GAAkF;AAAvI;AAAA;AAAA;AAAA;AAAA,kBALJ,eAMI;AAAA,sBAAKvB,KAAK,CAACwB,WAAN,GAAoBxB,KAAK,CAACyB,WAAN,CAAkBH,SAAlB,CAA4B,CAA5B,EAA+B,EAA/B,CAApB,GAA0DtB,KAAK,CAACa,eAAN,CAAsBa,cAAtB,KAAyC,iBAAzC,GAA6D,iBAA7D,GAAgF;AAA/I;AAAA;AAAA;AAAA;AAAA,kBANJ,eAOI;AAAA,oCACI,QAAC,MAAD;AAAQ,cAAA,IAAI,EAAC,IAAb;AAAkB,cAAA,OAAO,EAAE,MAAM;AAACzB,gBAAAA,MAAM,CAAC0B,QAAP,CAAgBC,IAAhB,GAAuB,UAAS5B,KAAK,CAACG,GAAI,EAA1C;AAA6C,eAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEM,CAACH,KAAK,CAACoB,MAAP,gBACE,QAAC,MAAD;AAAQ,cAAA,IAAI,EAAC,IAAb;AAAkB,cAAA,OAAO,EAAC,QAA1B;AAAmC,cAAA,SAAS,EAAC,MAA7C;AAAoD,cAAA,OAAO,EAAE,MAAMrB,aAAa,CAACC,KAAD,CAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,gBAGE,QAAC,MAAD;AAAQ,cAAA,IAAI,EAAC,IAAb;AAAkB,cAAA,OAAO,EAAC,QAA1B;AAAmC,cAAA,SAAS,EAAC,MAA7C;AAAoD,cAAA,OAAO,EAAE,MAAMD,aAAa,CAACC,KAAD,CAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALR;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ;AAAA,WAASA,KAAK,CAACG,GAAf;AAAA;AAAA;AAAA;AAAA,gBAZH;AADD;AAAA;AAAA;AAAA;AAAA,cAZJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAdZ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA8DH;;GA1FuB3B,S;UAEFT,W,EAEDD,W,EACGC,W;;;KALAS,S","sourcesContent":["import {Button, Col, Container, Form, Table} from \"react-bootstrap\";\r\nimport LoadingBox from \"./Loading\";\r\nimport ErrorBox from \"./Error\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {listOrders, orderDelete} from \"../actions/orderActions\";\r\nimport {ORDER_DELETE_RESET} from \"../constants/orderConstants\";\r\nimport Moment from \"moment\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nexport default function OrdersTab(props) {\r\n\r\n    const orderList = useSelector(state => state.orderList);\r\n    const {loading, error, orders} = orderList;\r\n    const dispatch = useDispatch();\r\n    const deleteOrder = useSelector(state => state.deleteOrder);\r\n    const {loading: loadingDelete, error: errorDelete, success: successDelete} = deleteOrder;\r\n    const [name, setName] = useState('');\r\n\r\n    useEffect(() => {\r\n        dispatch({type: ORDER_DELETE_RESET});\r\n        dispatch(listOrders());\r\n    }, [dispatch, successDelete]);\r\n\r\n    const Mailto = ({ email, subject = '', body = '', children }) => {\r\n        let params = subject || body ? '?' : '';\r\n        if (subject) params += `subject=${encodeURIComponent(subject)}`;\r\n        if (body) params += `${subject ? '&' : ''}body=${encodeURIComponent(body)}`;\r\n\r\n        return <Link to={`mailto:${email}${params}`}>{children}</Link>;\r\n    };\r\n\r\n    const deleteHandler = (order) => {\r\n        if(window.confirm(`Jesteś pawny/a, że chcesz usunąć zamówienie numer ${order._id}?`)){\r\n            dispatch(orderDelete(order._id));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div style={{paddingBottom: '14%', marginBottom: '8%'}}>\r\n            <h1 style={{margin: '10px'}}>Zamówienia</h1>\r\n            <Form>\r\n                <Form.Row style={{margin: '10px'}}>\r\n                    <Form.Group as={Col} lg=\"4\" controlId=\"formGridSearch\">\r\n                        <Form.Label className=\"mt-3\">Wyszukaj</Form.Label>\r\n                        <Form.Control className=\"text-lg\" onChange={e => setName(e.target.value)}/>\r\n                    </Form.Group>\r\n                </Form.Row>\r\n            </Form>\r\n\r\n            {loadingDelete && <LoadingBox/>}\r\n            {errorDelete && <ErrorBox variant=\"danger\">{errorDelete}</ErrorBox>}\r\n            {loading ? (<LoadingBox/>) : error ? (<ErrorBox variant=\"danger\">{error}</ErrorBox>) : (\r\n                    <Table className=\"mb-5\" striped bordered responsive>\r\n                        <thead>\r\n                        <tr>\r\n                            <th>NUMER</th>\r\n                            <th>EMAIL</th>\r\n                            <th>DATA</th>\r\n                            <th>KWOTA</th>\r\n                            <th>ZAPŁACONE</th>\r\n                            <th>DOSTARCZONE</th>\r\n                            <th>AKCJE</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {orders.filter((order) => {\r\n                            if(name === \"\"){\r\n                                return order;\r\n                            } else if(order._id.toLowerCase().includes(name.toLowerCase())){\r\n                                return order;\r\n                            }else if(order.shippingAddress.email.toLowerCase().includes(name.toLowerCase())){\r\n                                return order;\r\n                            } else if(order.createdAt.toLowerCase().includes(name.toLowerCase())){\r\n                                return order;\r\n                            }\r\n\r\n                        }).map(order => (\r\n                            <tr key={order._id}>\r\n                                <td>{order._id}</td>\r\n                                <td><Mailto email={order.user.email} subject={`Zamówienie nr ${order._id}`} body=\"Dzień Dobry...Pozdrawiamy\">{order.user.email}</Mailto></td>\r\n                                <td>{Moment(order.createdAt).format('YYYY/MM/DD HH:MM')}</td>\r\n                                <td>{order.shippingAddress.totalPrice.toFixed(2)} zł</td>\r\n                                <td>{order.isPaid ? order.paidAt.substring(0, 10) : (order.shippingAddress.paymentMethod === 'Gotówka przy odbiorze' ? 'Przy odbiorze':'Nieopłacone')}</td>\r\n                                <td>{order.isDelivered ? order.deliveredAt.substring(0, 10) : (order.shippingAddress.deliveryMethod === 'Odbiór Osobisty' ? 'Odbiór Osobisty': 'Niedostarczone')}</td>\r\n                                <td>\r\n                                    <Button size=\"sm\" onClick={() => {window.location.href =`/order/${order._id}`;}}>Szczegóły</Button>\r\n                                    { !order.isPaid ? (\r\n                                        <Button size=\"sm\" variant=\"danger\" className=\"ml-3\" onClick={() => deleteHandler(order)}>Anuluj Zamówienie</Button>\r\n                                    ) : (\r\n                                        <Button size=\"sm\" variant=\"danger\" className=\"ml-3\" onClick={() => deleteHandler(order)}>Zwrot Klienta</Button>\r\n                                    )}\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                        </tbody>\r\n                    </Table>\r\n                )}\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}