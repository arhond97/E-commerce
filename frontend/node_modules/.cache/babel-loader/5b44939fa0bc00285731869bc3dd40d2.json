{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Arhond\\\\IdeaProjects\\\\E-commerce\\\\frontend\\\\src\\\\pages\\\\OrderScreen.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Button, Col, Container, Image, Row } from \"react-bootstrap\";\nimport { deliverOrder, detailsOrder, payOrder } from \"../actions/orderActions\";\nimport { useEffect, useState } from \"react\";\nimport { ORDER_DELIVER_RESET, ORDER_PAY_RESET } from \"../constants/orderConstants\";\nimport axios from \"axios\";\nimport LoadingBox from \"../components/Loading\";\nimport { PayPalButton } from \"react-paypal-button-v2\";\nimport ErrorBox from \"../components/Error\";\nimport Moment from 'moment';\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Order(props) {\n  _s();\n\n  const cart = useSelector(state => state.cart);\n  const {\n    cartItems\n  } = cart;\n  const orderId = props.match.params.id;\n  const [sdkReady, setSdkReady] = useState(false);\n  const orderDetails = useSelector(state => state.orderDetails);\n  const {\n    order,\n    loading,\n    error\n  } = orderDetails;\n  const orderPay = useSelector(state => state.orderPay);\n  const {\n    loading: loadingPay,\n    error: errorPay,\n    success: successPay\n  } = orderPay;\n  const userSignin = useSelector(state => state.userSignin);\n  const {\n    userInfo\n  } = userSignin;\n  const dispatch = useDispatch();\n  const orderDeliver = useSelector(state => state.orderDeliver);\n  const {\n    loading: loadingDeliver,\n    error: errorDeliver,\n    success: successDeliver\n  } = orderDeliver;\n  Moment.locale('pl');\n  useEffect(() => {\n    const addPayPalScript = async () => {\n      const {\n        data\n      } = await axios.get('/api/config/paypal');\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = `https://www.paypal.com/sdk/js?client-id=AYsNtXte8BZkVKMJWVy-pAKWIsNPG4v7HgPDdMBe_lgIlJSeomQZky1ljTcHo-m_EwY7GwblakPC9i2D&currency=PLN`;\n      script.async = true;\n\n      script.onload = () => {\n        setSdkReady(true);\n      };\n\n      document.body.appendChild(script);\n    };\n\n    if (!order || successPay || successDeliver || order && order._id !== orderId) {\n      dispatch({\n        type: ORDER_PAY_RESET\n      });\n      dispatch({\n        type: ORDER_DELIVER_RESET\n      });\n      dispatch(detailsOrder(orderId));\n    } else {\n      if (!order.isPaid) {\n        if (!window.paypal) {\n          addPayPalScript();\n        } else {\n          setSdkReady(true);\n        }\n      }\n    }\n  }, [dispatch, orderId, sdkReady, successPay, successDeliver, order]);\n\n  const successPaymentHandler = paymentResult => {\n    dispatch(payOrder(order, paymentResult));\n  };\n\n  const deliverHandler = () => {\n    if (window.confirm(`Czy chcesz dostarczyć zamówienie numer ${order._id}?`)) {\n      dispatch(deliverOrder(order._id));\n    }\n  };\n\n  return loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 23\n  }, this) : error ? /*#__PURE__*/_jsxDEV(ErrorBox, {\n    variant: \"danger\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 49\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"mr-0\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        lg: \"6\",\n        className: \"ml-2\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: \"6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"mt-3 black-text-lg\",\n            children: \"Zam\\xF3wienie nr\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"black-text-lg\",\n            children: order._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          className: \"mt-5 mb-5 p-3 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-5\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: \"1.Spos\\xF3b dostawy\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ml-3\",\n                children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: order.shippingAddress.deliveryMethod\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 mx-3\",\n            children: order.isDelivered ? /*#__PURE__*/_jsxDEV(ErrorBox, {\n              variant: \"success\",\n              children: [\"Dostarczono: \", Moment(order.deliveredAt).format('YYYY/MM/DD HH:MM')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 50\n            }, this) : order.shippingAddress.deliveryMethod === 'Kurier' && /*#__PURE__*/_jsxDEV(ErrorBox, {\n              variant: \"danger\",\n              children: \"Zam\\xF3wienie Niedostarczone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 212\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          className: \"mt-5 mb-5 p-3 border border-dark\",\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-5\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: \"2.Metoda P\\u0142atno\\u015Bci\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ml-3\",\n                children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: order.shippingAddress.paymentMethod\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 mx-3\",\n            children: order.isPaid ? /*#__PURE__*/_jsxDEV(ErrorBox, {\n              variant: \"success\",\n              children: [\"Zap\\u0142acono: \", Moment(order.paidAt).format('YYYY/MM/DD HH:MM')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 45\n            }, this) : order.shippingAddress.paymentMethod === 'PayPal' && /*#__PURE__*/_jsxDEV(ErrorBox, {\n              variant: \"danger\",\n              children: \"Zam\\xF3wienie Nieop\\u0142acone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 199\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          className: \"mt-5 mb-5 p-3 border border-dark\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: \"3.Dane Adresowe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my-1 ml-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"E-mail:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: order.shippingAddress.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my-1 ml-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"Imi\\u0119 i Nazwisko: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [order.shippingAddress.name, \" \", order.shippingAddress.surname]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 63\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my-1 ml-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  children: \"Adres: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [order.shippingAddress.address, \", \", order.shippingAddress.state, \", \", order.shippingAddress.city, \", \", order.shippingAddress.zip]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 53\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Container, {\n          className: \"mt-5 mb-5 p-3 border border-dark\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"8\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-5\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: \"4.Zawarto\\u015B\\u0107 Koszyka:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: order.orderItems.map(item => /*#__PURE__*/_jsxDEV(Row, {\n                  className: \"mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    lg: \"4\",\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      to: `/product/${item.product}`,\n                      children: /*#__PURE__*/_jsxDEV(Image, {\n                        className: \"img-fluid\",\n                        src: item.image\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 140,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    lg: \"4\",\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      className: \"link-color-carousel\",\n                      to: `/product/${item.product}`,\n                      children: /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"mt-4\",\n                        style: {\n                          marginRight: \"200px\",\n                          whiteSpace: \"nowrap\",\n                          overflow: \"hidden\",\n                          textOverflow: \"ellipsis\",\n                          width: \"13ch\"\n                        },\n                        children: [item.name, \" x \", item.qty]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 57\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    lg: \"4\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mt-4\",\n                      style: {\n                        marginRight: \"200px\",\n                        whiteSpace: \"nowrap\",\n                        overflow: \"hidden\",\n                        textOverflow: \"ellipsis\",\n                        width: \"13ch\"\n                      },\n                      children: [(item.qty * item.price).toFixed(2), \" z\\u0142\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        lg: \"4\",\n        className: \"mt-5 ml-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center\",\n          children: \"Podsumowanie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-light p-3 mr-2\",\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: \"5\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-center\",\n                children: \"Koszyk:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"7\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-center\",\n                children: [order.shippingAddress.cartPrice.toFixed(2), \" z\\u0142\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: \"5\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-center\",\n                children: \"Dostawa:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"7\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-center\",\n                children: [order.shippingAddress.deliveryMethod === 'Kurier' ? order.shippingAddress.deliveryPrice.toFixed(2) : '0.00', \" z\\u0142\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            className: \"mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              lg: \"5\",\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-center\",\n                children: \"Razem:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              lg: \"7\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-center\",\n                children: [order.shippingAddress.deliveryMethod === 'Kurier' ? (order.shippingAddress.cartPrice + order.shippingAddress.deliveryPrice).toFixed(2) : order.shippingAddress.cartPrice.toFixed(2), \" z\\u0142\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), !userInfo.isAdmin && !order.isPaid && order.shippingAddress.paymentMethod === 'PayPal' && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: !sdkReady ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [errorPay && /*#__PURE__*/_jsxDEV(ErrorBox, {\n                variant: \"danger\",\n                children: errorPay\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(PayPalButton, {\n                amount: order.shippingAddress.totalPrice,\n                onSuccess: successPaymentHandler,\n                currency: \"PLN\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 29\n          }, this), userInfo.isAdmin && order.isPaid && !order.isDelivered && order.shippingAddress.deliveryMethod === \"Kurier\" && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline-dark\",\n            size: \"md\",\n            className: \"mt-5 px-3 text-lg mb-3\",\n            block: true,\n            onClick: deliverHandler,\n            children: \"Dostarcz Zam\\xF3wienie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 29\n          }, this), userInfo.isAdmin && !order.isPaid && !order.isDelivered && order.shippingAddress.paymentMethod === \"Gotówka przy odbiorze\" && /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outline-dark\",\n            size: \"md\",\n            className: \"mt-5 px-3 text-lg mb-3\",\n            block: true,\n            onClick: deliverHandler,\n            children: \"Dostarcz Zam\\xF3wienie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Order, \"BPoMqPa+nigjFiZP548pHc7XL5k=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useDispatch, useSelector];\n});\n\n_c = Order;\n\nvar _c;\n\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"sources":["C:/Users/Arhond/IdeaProjects/E-commerce/frontend/src/pages/OrderScreen.js"],"names":["React","useDispatch","useSelector","Button","Col","Container","Image","Row","deliverOrder","detailsOrder","payOrder","useEffect","useState","ORDER_DELIVER_RESET","ORDER_PAY_RESET","axios","LoadingBox","PayPalButton","ErrorBox","Moment","Link","Order","props","cart","state","cartItems","orderId","match","params","id","sdkReady","setSdkReady","orderDetails","order","loading","error","orderPay","loadingPay","errorPay","success","successPay","userSignin","userInfo","dispatch","orderDeliver","loadingDeliver","errorDeliver","successDeliver","locale","addPayPalScript","data","get","script","document","createElement","type","src","async","onload","body","appendChild","_id","isPaid","window","paypal","successPaymentHandler","paymentResult","deliverHandler","confirm","shippingAddress","deliveryMethod","isDelivered","deliveredAt","format","paymentMethod","paidAt","email","name","surname","address","city","zip","orderItems","map","item","product","image","marginRight","whiteSpace","overflow","textOverflow","width","qty","price","toFixed","cartPrice","deliveryPrice","isAdmin","totalPrice"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {Button, Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport {deliverOrder, detailsOrder, payOrder} from \"../actions/orderActions\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {ORDER_DELIVER_RESET, ORDER_PAY_RESET} from \"../constants/orderConstants\";\r\nimport axios from \"axios\";\r\nimport LoadingBox from \"../components/Loading\";\r\nimport {PayPalButton} from \"react-paypal-button-v2\";\r\nimport ErrorBox from \"../components/Error\";\r\nimport Moment from 'moment';\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\nexport default function Order(props) {\r\n\r\n    const cart = useSelector((state) => state.cart);\r\n    const {cartItems} = cart;\r\n    const orderId = props.match.params.id;\r\n    const [sdkReady, setSdkReady] = useState(false);\r\n    const orderDetails = useSelector((state) => state.orderDetails);\r\n    const {order, loading, error} = orderDetails;\r\n    const orderPay = useSelector((state) => state.orderPay);\r\n    const { loading: loadingPay, error: errorPay, success: successPay,} = orderPay;\r\n    const userSignin = useSelector((state) => state.userSignin);\r\n    const {userInfo} = userSignin;\r\n    const dispatch = useDispatch();\r\n    const orderDeliver = useSelector((state) => state.orderDeliver);\r\n    const { loading: loadingDeliver, error: errorDeliver, success: successDeliver,} = orderDeliver;\r\n    Moment.locale('pl');\r\n\r\n    useEffect(() => {\r\n        const addPayPalScript = async () => {\r\n            const { data } = await axios.get('/api/config/paypal');\r\n            const script = document.createElement('script');\r\n            script.type = 'text/javascript';\r\n            script.src = `https://www.paypal.com/sdk/js?client-id=AYsNtXte8BZkVKMJWVy-pAKWIsNPG4v7HgPDdMBe_lgIlJSeomQZky1ljTcHo-m_EwY7GwblakPC9i2D&currency=PLN`;\r\n            script.async = true;\r\n            script.onload = () => {\r\n                setSdkReady(true);\r\n            };\r\n            document.body.appendChild(script);\r\n        };\r\n        if (!order || successPay || successDeliver || (order && order._id !== orderId)) {\r\n            dispatch({type:ORDER_PAY_RESET});\r\n            dispatch({type:ORDER_DELIVER_RESET});\r\n            dispatch(detailsOrder(orderId));\r\n        } else {\r\n            if (!order.isPaid) {\r\n                if (!window.paypal) {\r\n                    addPayPalScript();\r\n                } else {\r\n                    setSdkReady(true);\r\n                }\r\n            }\r\n        }\r\n    }, [dispatch, orderId, sdkReady, successPay, successDeliver, order])\r\n\r\n    const successPaymentHandler = (paymentResult) => {\r\n        dispatch(payOrder(order, paymentResult));\r\n    }\r\n\r\n    const deliverHandler = () => {\r\n        if(window.confirm(`Czy chcesz dostarczyć zamówienie numer ${order._id}?`)) {\r\n            dispatch(deliverOrder(order._id));\r\n        }\r\n    }\r\n\r\n    return loading ? (<LoadingBox/>) : error ? (<ErrorBox variant=\"danger\">{error}</ErrorBox>) : (\r\n        <>\r\n            <Row className=\"mr-0\">\r\n                <Col lg=\"6\" className=\"ml-2\">\r\n                    <Col sm=\"6\">\r\n                        <h1 className=\"mt-3 black-text-lg\">Zamówienie nr</h1>\r\n                        <h1 className=\"black-text-lg\">{order._id}</h1>\r\n                    </Col>\r\n                    <Container className=\"mt-5 mb-5 p-3 border border-dark\">\r\n                        <Row>\r\n                            <Col lg=\"6\">\r\n                                <div className=\"mb-5\">\r\n                                    <h2>1.Sposób dostawy</h2>\r\n                                </div>\r\n                                <div className=\"ml-3\">\r\n                                    <h4>{order.shippingAddress.deliveryMethod}</h4>\r\n                                </div>\r\n                            </Col>\r\n                        </Row>\r\n                        <div className=\"mt-3 mx-3\">\r\n                            {order.isDelivered ? <ErrorBox variant=\"success\">Dostarczono: {Moment(order.deliveredAt).format('YYYY/MM/DD HH:MM')}</ErrorBox>: (order.shippingAddress.deliveryMethod === 'Kurier' && <ErrorBox variant=\"danger\">Zamówienie Niedostarczone</ErrorBox>)}\r\n                        </div>\r\n                    </Container>\r\n\r\n\r\n                    <Container className=\"mt-5 mb-5 p-3 border border-dark\">\r\n                        <Row>\r\n                            <Col lg=\"6\">\r\n                                <div className=\"mb-5\">\r\n                                    <h2>2.Metoda Płatności</h2>\r\n                                </div>\r\n                                <div className=\"ml-3\">\r\n                                    <h4>{order.shippingAddress.paymentMethod}</h4>\r\n                                </div>\r\n                            </Col>\r\n                        </Row>\r\n                        <div className=\"mt-3 mx-3\">\r\n                            {order.isPaid ? <ErrorBox variant=\"success\">Zapłacono: {Moment(order.paidAt).format('YYYY/MM/DD HH:MM')}</ErrorBox>: (order.shippingAddress.paymentMethod === 'PayPal' && <ErrorBox variant=\"danger\">Zamówienie Nieopłacone</ErrorBox>)}\r\n                        </div>\r\n                    </Container>\r\n\r\n                    <Container  className=\"mt-5 mb-5 p-3 border border-dark\">\r\n                        <Row>\r\n                            <Col lg=\"6\">\r\n                                <div className=\"mb-3\">\r\n                                    <h2>3.Dane Adresowe</h2>\r\n                                </div>\r\n                                <div className=\"my-1 ml-3\">\r\n                                    <h5>E-mail:</h5><p>{order.shippingAddress.email}</p>\r\n                                </div>\r\n                                <div className=\"my-1 ml-3\">\r\n                                    <h5>Imię i Nazwisko: </h5><p>{order.shippingAddress.name} {order.shippingAddress.surname}</p>\r\n                                </div>\r\n                                <div className=\"my-1 ml-3\">\r\n                                    <h5>Adres: </h5><p>{order.shippingAddress.address}, {order.shippingAddress.state}, {order.shippingAddress.city}, {order.shippingAddress.zip}</p>\r\n                                </div>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                    <Container  className=\"mt-5 mb-5 p-3 border border-dark\">\r\n                        <Row>\r\n                            <Col lg=\"8\">\r\n                                <div className=\"mb-5\">\r\n                                    <h2>4.Zawartość Koszyka:</h2>\r\n                                </div>\r\n                                <div>\r\n                                    {\r\n                                        order.orderItems.map((item) => (\r\n                                            <Row className=\"mb-3\">\r\n                                                <Col lg=\"4\">\r\n                                                    <Link to={`/product/${item.product}`}>\r\n                                                        <Image className=\"img-fluid\" src={item.image}/>\r\n                                                    </Link>\r\n                                                </Col>\r\n                                                <Col lg=\"4\">\r\n                                                    <Link className=\"link-color-carousel\" to={`/product/${item.product}`}>\r\n                                                        <p className=\"mt-4\" style={{marginRight: \"200px\",whiteSpace: \"nowrap\", overflow: \"hidden\",textOverflow: \"ellipsis\",width: \"13ch\"}}>\r\n                                                            {item.name} x {item.qty}\r\n                                                        </p>\r\n                                                    </Link>\r\n                                                </Col>\r\n                                                <Col lg=\"4\">\r\n                                                    <p className=\"mt-4\" style={{marginRight: \"200px\",whiteSpace: \"nowrap\", overflow: \"hidden\",textOverflow: \"ellipsis\",width: \"13ch\"}}>{(item.qty * item.price).toFixed(2)} zł</p>\r\n                                                </Col>\r\n                                            </Row>\r\n                                        ))\r\n                                    }\r\n                                </div>\r\n\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Col>\r\n\r\n                <Col lg=\"4\" className=\"mt-5 ml-3\">\r\n                    <h2 className=\"text-center\">Podsumowanie</h2>\r\n                    <div className=\"bg-light p-3 mr-2\">\r\n                        <Row className=\"mt-4\">\r\n                            <Col lg=\"5\">\r\n                                <h4 className=\"text-center\">Koszyk:</h4>\r\n                            </Col>\r\n                            <Col lg=\"7\">\r\n                                <h3 className=\"text-center\">{order.shippingAddress.cartPrice.toFixed(2)} zł</h3>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className=\"mt-4\">\r\n                            <Col lg=\"5\">\r\n                                <h4 className=\"text-center\">Dostawa:</h4>\r\n                            </Col>\r\n                            <Col lg=\"7\">\r\n                                <h3 className=\"text-center\">{order.shippingAddress.deliveryMethod === 'Kurier' ? order.shippingAddress.deliveryPrice.toFixed(2) : '0.00'} zł</h3>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className=\"mt-4\">\r\n                            <Col lg=\"5\">\r\n                                <h4 className=\"text-center\">Razem:</h4>\r\n                            </Col>\r\n                            <Col lg=\"7\">\r\n                                <h3 className=\"text-center\">{order.shippingAddress.deliveryMethod === 'Kurier' ? (order.shippingAddress.cartPrice + order.shippingAddress.deliveryPrice).toFixed(2): order.shippingAddress.cartPrice.toFixed(2) } zł</h3>\r\n                            </Col>\r\n                        </Row>\r\n                        {!userInfo.isAdmin && !order.isPaid && order.shippingAddress.paymentMethod === 'PayPal' && (\r\n                            <div>\r\n                                {!sdkReady ? (\r\n                                    <LoadingBox/>\r\n                                ) : (\r\n                                    <div>\r\n                                        {errorPay && (\r\n                                            <ErrorBox variant=\"danger\">{errorPay}</ErrorBox>\r\n                                        )}\r\n                                        {\r\n                                            <PayPalButton amount={order.shippingAddress.totalPrice} onSuccess={successPaymentHandler} currency=\"PLN\"/>\r\n                                        }\r\n                                    </div>\r\n                                )}\r\n\r\n                            </div>\r\n                        )}\r\n\r\n                        {userInfo.isAdmin && order.isPaid && !order.isDelivered && order.shippingAddress.deliveryMethod === \"Kurier\" &&(\r\n                            <Button variant=\"outline-dark\" size=\"md\" className=\"mt-5 px-3 text-lg mb-3\" block onClick={deliverHandler}>Dostarcz Zamówienie</Button>\r\n                        )}\r\n                        {userInfo.isAdmin && !order.isPaid && !order.isDelivered && order.shippingAddress.paymentMethod === \"Gotówka przy odbiorze\" &&(\r\n                            <Button variant=\"outline-dark\" size=\"md\" className=\"mt-5 px-3 text-lg mb-3\" block onClick={deliverHandler}>Dostarcz Zamówienie</Button>\r\n                        )}\r\n                    </div>\r\n\r\n\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n\r\n            </Row>\r\n        </>\r\n\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}